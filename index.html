<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Deepu Spin & Win</title>
<style>
body {
  text-align: center;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
  color: #fff;
  margin: 0;
  padding: 0;
}

canvas {
  margin-top: 20px;
  border-radius: 15px;
}

button {
  margin-top: 20px;
  padding: 14px 30px;
  font-size: 18px;
  background: linear-gradient(45deg, #00c6ff, #0072ff);
  color: white;
  border: none;
  border-radius: 25px;
  cursor: pointer;
}

#coins, #spins, #result {
  font-size: 20px;
  margin-top: 10px;
}

@media (max-width: 600px) {
  button {
    width: 90%;
    font-size: 20px;
  }
}
</style>
</head>
<body>

<h1>ðŸŽ¡ Deepu Spin & Win</h1>

<canvas id="wheel" width="300" height="300"></canvas>

<p>Coins: <span id="coins">100</span></p>
<p>Spins Left: <span id="spins">5</span></p>

<button onclick="spinWheel()">SPIN</button>

<p id="result"></p>

<audio id="spinSound" src="https://www.soundjay.com/button/beep-07.mp3"></audio>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const radius = 150;
let angle = 0;
let spinning = false;

let coins = 100;
let spinsLeft = 5;

const options = [
  {text:"10 Coins", value:10, chance:30},
  {text:"20 Coins", value:20, chance:25},
  {text:"Try Again", value:0, chance:30},
  {text:"50 Coins", value:50, chance:10},
  {text:"Jackpot 100 Coins", value:100, chance:5}
];
const colors = ["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231"];

function drawWheel() {
    const total = options.reduce((sum,o)=>sum+o.chance,0);
    let start = 0;
    options.forEach((opt,i)=>{
        let slice = (opt.chance/total) * 2 * Math.PI;
        ctx.beginPath();
        ctx.fillStyle = colors[i];
        ctx.moveTo(radius,radius);
        ctx.arc(radius,radius,radius,start,start+slice);
        ctx.fill();

        ctx.save();
        ctx.translate(radius,radius);
        ctx.rotate(start+slice/2 + angle);
        ctx.fillStyle="white";
        ctx.font="16px Arial";
        ctx.fillText(opt.text, 60, 5);
        ctx.restore();

        start += slice;
    });
}
drawWheel();

function spinWheel() {
    if(spinsLeft <= 0){
        alert("No spins left!");
        return;
    }
    if(coins < 10){
        alert("Not enough coins!");
        return;
    }
    if(spinning) return;

    coins -= 10;
    spinsLeft--;
    document.getElementById("coins").innerText = coins;
    document.getElementById("spins").innerText = spinsLeft;

    const spinSound = document.getElementById("spinSound");
    spinSound.play();

    // spin animation
    let target = Math.random() * 2 * Math.PI;
    let totalSpins = 6;
    let start = angle;
    let end = angle + totalSpins*2*Math.PI + target;
    let duration = 3000;
    spinning = true;
    let startTime = null;

    function animate(timestamp){
        if(!startTime) startTime = timestamp;
        let progress = timestamp - startTime;
        let currentAngle = start + (end-start) * easeOutCubic(progress/duration);
        angle = currentAngle;
        ctx.clearRect(0,0,canvas.width,canvas.height);
        drawWheel();

        if(progress < duration){
            requestAnimationFrame(animate);
        } else {
            spinning = false;
            // calculate reward
            let rand = Math.random()*100;
            let sum = 0;
            let reward = options[options.length-1]; // default
            for(let opt of options){
                sum += opt.chance;
                if(rand <= sum){
                    reward = opt;
                    break;
                }
            }
            coins += reward.value;
            document.getElementById("coins").innerText = coins;
            document.getElementById("result").innerText = "Result: " + reward.text;
        }
    }
    requestAnimationFrame(animate);
}

function easeOutCubic(t){
    return (--t)*t*t + 1;
}
</script>

</body>
  </html>
